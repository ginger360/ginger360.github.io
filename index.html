<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生姜密语 | 登录系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .security-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .security-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .security-icon {
            color: #4CAF50;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.92);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            margin-top: 40px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .security-shield {
            position: absolute;
            top: -30px;
            right: -30px;
            width: 100px;
            height: 100px;
            background: #4CAF50;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 2.5rem;
            transform: rotate(20deg);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }
        
        .header {
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><rect fill="rgba(255,255,255,0.1)" x="0" y="0" width="100" height="100"/></svg>');
            opacity: 0.3;
        }
        
        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 600;
            position: relative;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
        }
        
        .content {
            padding: 30px;
        }
        
        .login-section, .message-section {
            transition: all 0.5s ease;
        }
        
        .message-section {
            display: none;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        input {
            width: 100%;
            padding: 14px 14px 14px 45px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus {
            border-color: #1a2a6c;
            outline: none;
            box-shadow: 0 0 0 2px rgba(26, 42, 108, 0.2);
        }
        
        .input-icon {
            position: absolute;
            left: 15px;
            top: 40px;
            color: #777;
        }
        
        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: 0.5s;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(26, 42, 108, 0.3);
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .logout-btn {
            background: linear-gradient(to right, #d32f2f, #b71c1c);
            margin-top: 15px;
        }
        
        .message-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            position: relative;
            border-left: 5px solid #1a2a6c;
            border-right: 5px solid #b21f1f;
            background: linear-gradient(to right, white 95%, #f8f8f8);
        }
        
        .message-card h3 {
            color: #1a2a6c;
            margin-bottom: 15px;
            font-size: 1.4rem;
            text-align: center;
        }
        
        .message-content {
            line-height: 1.7;
            color: #444;
            font-size: 1.1rem;
            background: rgba(245, 245, 245, 0.5);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #eee;
        }
        
        .signature {
            text-align: right;
            margin-top: 20px;
            font-style: italic;
            color: #b21f1f;
            font-weight: 500;
        }
        
        .error-message {
            color: #d32f2f;
            text-align: center;
            margin-top: 15px;
            font-weight: 500;
            display: none;
            background: rgba(211, 47, 47, 0.1);
            padding: 10px;
            border-radius: 8px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            justify-content: center;
        }
        
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            margin-right: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 3px solid white;
        }
        
        .user-details h2 {
            color: #333;
            margin-bottom: 5px;
            text-align: center;
        }
        
        .user-details p {
            color: #666;
            text-align: center;
        }
        
        .security-features {
            margin-top: 25px;
            padding: 15px;
            background: rgba(245, 245, 245, 0.8);
            border-radius: 10px;
            border: 1px solid #eee;
        }
        
        .security-features h4 {
            color: #1a2a6c;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .features-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .feature {
            background: rgba(26, 42, 108, 0.1);
            color: #1a2a6c;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .attempts-counter {
            text-align: center;
            margin-top: 15px;
            color: #666;
            font-size: 0.9rem;
        }
        
        .session-timer {
            text-align: center;
            margin-top: 10px;
            color: #1a2a6c;
            font-weight: 500;
        }
        
        .agreement-container {
            margin: 20px 0;
            padding: 15px;
            background: rgba(245, 245, 245, 0.8);
            border-radius: 10px;
            border: 1px solid #eee;
        }
        
        .agreement-content {
            max-height: 150px;
            overflow-y: auto;
            padding: 10px;
            margin-bottom: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .agreement-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .account-selector {
            margin-bottom: 20px;
        }
        
        .account-selector label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .account-selector select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
        }
        
        .role-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .superadmin-badge {
            background: linear-gradient(to right, #ff9800, #f57c00);
            color: white;
        }
        
        .admin-badge {
            background: linear-gradient(to right, #2196F3, #1976D2);
            color: white;
        }
        
        .user-badge {
            background: linear-gradient(to right, #4CAF50, #388E3C);
            color: white;
        }
        
        @media (max-width: 500px) {
            .container {
                border-radius: 15px;
            }
            
            .header {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .avatar {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .security-shield {
                width: 70px;
                height: 70px;
                font-size: 2rem;
                top: -20px;
                right: -20px;
            }
        }
    </style>
</head>
<body>
    <div class="security-header">
        <div class="security-status">
            <i class="fas fa-shield-alt security-icon"></i>
            <span>安全系统已启用</span>
        </div>
        <div class="security-info">
            <i class="fas fa-lock"></i> 安全连接 | 加密存储
        </div>
    </div>
    
    <div class="container">
        <div class="security-shield">
            <i class="fas fa-shield-alt"></i>
        </div>
        
        <div class="header">
            <h1><i class="fas fa-lock"></i> 生姜安全密语</h1>
            <p>生姜的专属留言，不安全可靠</p>
        </div>
        
        <div class="content">
            <!-- 登录区域 -->
            <div class="login-section" id="loginSection">
                <div class="form-group">
                    <label for="username"><i class="fas fa-user"></i> 用户名</label>
                    <i class="fas fa-user input-icon"></i>
                    <input type="text" id="username" placeholder="输入用户名" autocomplete="username">
                </div>
                
                <div class="form-group">
                    <label for="password"><i class="fas fa-key"></i> 密码</label>
                    <i class="fas fa-key input-icon"></i>
                    <input type="password" id="password" placeholder="输入密码" autocomplete="current-password">
                </div>
                
                <div class="agreement-container">
                    <div class="agreement-content">
                        <h4>更新公告</h4>
                        <h5>2.4版本更新公告<h5>
                        <p>改动：</p>
                        <p>钢蹦账户内容将直接公开，用户名：钢蹦，密码🌚：GB54188，想观看的用户随便观看，生姜特许😝🤪🙂，Eraser用户名称将改为eraser</p>
                        <p>由于本来可以大更新一波的，没想到网站被生姜😂玩崩了，先这样子吧，为了网站的稳定性，下次更新网站将变成极简版😂。</p>
                        <p>本次更新内容将会被覆盖，如需查看原版本，请联系生姜😀😀😀。</p>
                        <h4>保密协议</h4>
                        <p>本系统包含高度机密和个人化信息。在访问本系统前，您必须同意以下条款：</p>
                        <ol>
                            <li>您承诺对所看到的所有内容严格保密，不得以任何形式（口头、书面、电子或其他方式）向任何第三方透露。</li>
                            <li>您理解并同意，未经作者（生姜）明确书面许可，私自传播、分享或泄露系统内任何信息将构成严重违约行为。</li>
                            <li>如您发现任何安全漏洞或未授权访问，应立即通过官方渠道报告给作者（生姜）。</li>
                            <li>违反本协议可能导致法律诉讼，您将承担由此产生的一切法律责任和经济赔偿(真）。</li>
                            <li>如需分享任何内容，必须事先获得作者（生姜）的书面同意。</li>
                        </ol>
                        <p>本协议自您勾选同意之日起生效，并在您使用本系统期间持续有效。</p>
                    </div>
                    <div class="agreement-checkbox">
                        <input type="checkbox" id="agreeCheckbox">
                        <label for="agreeCheckbox">我已阅读并非常同意上述保密协议与更新公告并发誓🤫</label>
                    </div>
                </div>
                
                <button class="btn" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i> 不安全登录
                </button>
                
                <div class="error-message" id="errorMessage">
                    <i class="fas fa-exclamation-triangle"></i> 用户名或密码错误，请重试
                </div>
                
                <div class="attempts-counter" id="attemptsCounter">
                    剩余尝试次数: <span id="attemptsLeft">5</span>
                </div>
                
                <div class="security-features">
                    <h4><i class="fas fa-shield-alt"></i> 安全保护机制</h4>
                    <div class="features-list">
                        <div class="feature">登录限制</div>
                        <div class="feature">会话超时</div>
                        <div class="feature">输入过滤</div>
                        <div class="feature">加密存储</div>
                        <div class="feature">XSS防护</div>
                    </div>
                </div>
            </div>
            
            <!-- 留言区域 -->
            <div class="message-section" id="messageSection">
                <div class="user-info">
                    <div class="avatar" id="userAvatar">U</div>
                    <div class="user-details">
                        <h2 id="userName">用户名 <span id="userRole" class="role-badge">角色</span></h2>
                        <p>生姜的专属留言</p>
                    </div>
                </div>
                
                <div class="account-selector" id="accountSelector" style="display: none;">
                    <label for="selectAccount"><i class="fas fa-users"></i> 选择查看账户</label>
                    <select id="selectAccount">
                        <option value="">-- 请选择账户 --</option>
                    </select>
                </div>
                
                <div class="message-card">
                    <div class="heart-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h3><i class="fas fa-envelope"></i> 给你的话</h3>
                    <div class="message-content" id="messageContent">
                        加载中...
                    </div>
                    <div class="signature">
                        <p>—— 生姜</p>
                    </div>
                </div>
                
                <div class="session-timer" id="sessionTimer">
                    <i class="fas fa-clock"></i> 会话将在 <span id="timeLeft">05:00</span> 后自动结束
                </div>
                
                <button class="btn logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> 安全退出
                </button>
                
                <div class="security-features">
                    <h4><i class="fas fa-user-shield"></i> 当前安全状态</h4>
                    <div class="features-list">
                        <div class="feature">会话加密</div>
                        <div class="feature">本地存储保护</div>
                        <div class="feature">自动超时</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 账户系统（包含角色和权限）
        const accounts = {
            ginger: {
                password: 'VIP_648648J',
                name: 'Ginger',
                role: 'superadmin',
                message: "亲爱的Ginger，您是作者，作为超级管理员，您拥有最高权限。感谢您对系统的信任和支持。请确保所有信息的安全，并监督管理员的工作。一定要非常疯狂，分裂出第二人格，那咋了？那咋了？我疯了，哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂😂🤬🤬🤬🤬🤬🤬🤬🤬😡🤬😡🤬🥶😶‍🌫️🤬😡😶‍🌫️🤬🥶🥵😡🥵🥶🤬🥶🤬🤬🥶🤬🥶😳😶‍🌫️🥶🤬😡🐵🐒🐒🐒🌰🌰🌰🌰🌰🌰🌰🌰🌰🌰🌰🌰🌰🌰。",
                avatarText: 'G'
            },
            eraser: {
                password: 'eraser54188',
                name: 'eraser',
                role: 'admin',
                message: "乐子😁Eraser，都七八年了，还活在你M的身下，连注册个QQ都不会👎👎👎👎👎，纯乐子，我都等一个星期了，不会连网站都没看一下吧？😫，我操了，老弟，这你扯不扯？，赶紧添加本生姜的QQ号：2448974355，本王做梦都会梦到你，现在想都不想了，要是在不给漫画与回信，🥲我就把你户开了😈😈😈，然后断绝关系🌚",
                avatarText: 'e'
            },
            jiayu: {
                password: 'JiaYu123',
                name: '甲鱼',
                role: 'admin',
                message: "甲鱼，",
                avatarText: '甲'
            },
            song: {
                password: 'Song648',
                name: '宋哥',
                role: 'admin',
                message: "宋哥，暂时没有其他可说的话",
                avatarText: '宋'
            },
            laozhang: {
                password: 'Liao12345',
                name: '老张',
                role: 'user',
                message: "老张，我给你送信，结果你去找别人了，你是不是觉得我是老色子？？？？？？？？？？？？？？？？？？？？？(ﾟДﾟ≡ﾟдﾟ)!?😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是是不是。",
                avatarText: '张'
            },
            gangbeng: {
                password: 'GB54188',
                name: '钢蹦',
                role: 'user',
                message: "钢蹦，你这个乐子，进了本姜的教训，还在那里胡作非为，祸害百姓👎👎👎，每次放学回家都非法组队，我艹👻👻👻，🥲以为自己长得很衰，结果就是个乐子小丑🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡，🤗我告诉你，要是再不改掉那些毛病的话，我TM顺着网线去找你家，半夜爬窗子来到你房间，然后😈🔪😰，😈🔪😵。😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈😈。",
                avatarText: '钢'
            },
            yu: {
                password: 'yu12345',
                name: '喻',
                role: 'user',
                message: "喻，“本姜其实 like you 很久了😄，666别当真，是生姜的第二人格出现了，那咋啦？反正我是我，你还是我，哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈，不好，身体要被第二人格占据了，😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱，你去s吧，第一人格，🌚，啊😰😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱 😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱，9命，第二人格已经被我打败了，🥴，第一人格说的是实话，呸，我说的话是实话。🤐🤐🤐🤐🤐，嗯嗯，不要听第二人格瞎说🥶。”  以上纯虚拟情景，请勿模仿，🙏😀。",
                avatarText: '喻'
            },
            dazuo: {
                password: 'DaZuo666',
                name: '大佐',
                role: 'user',
                message: "大佐，虽然你成绩较好，性格开朗，但本身讲建议你解决一下小毛病：1.我买了一个非洲之心，你就疯抢，这也不是你的呀，想要你可以去买呀，😁，但你也别抢。2.能不能别总把我当成受害者😢？比如你当红狼夺舍😏，我当邪恶绿裤子，我当夺舍红狼路边一条，你就cos盾狗来肘我，这🌚“实在是太美”(神秘坤语)，我都快被你肘死了。我知道你是在开玩笑，但你也不能这样子，整蛊朋友，我都快变成蛊了😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱😱，差不多就这些",
                avatarText: '佐'
            },
            jianguo: {
                password: 'JianGuo',
                name: '坚果',
                role: 'admin',
                message: "坚果，欢迎您成为管理员！你自己去看看别的吧，😀。",
                avatarText: '坚'
            },
            pan: {
                password: 'PYX54188',
                name: '潘',
                role: 'user',
                message: "潘，猪妞一个🐷🐷🐷，一个乐子🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤡🤗🤡，猪妞🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷🐷。",
                avatarText: '张'
            },
            zhangfong: {
                password: 'ZF54188',
                name: '张夯',
                role: 'user',
                message: "张夯，你身强体壮，经常被我们报答😏😏，不要以为自己是厕所所长就在那里得瑟，你还放任走廊廊主、女厕所军队擅自进入男厕所，他们就是嫉妒我们。男厕所可以洗拖把，人又少，不用排队，而不去走廊那个公共拖把池要排很久的队，你这个“叛徒😡、特务😡、大军阀😡、反姜分子😡、野心家😡，😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡😡这个厕所所长的位置，你不配，老师迟早会把你撤掉的。你肘可以肘，就是不能肘心脏👿，听到了吗？   最后，我再送你一份大礼，点击此链接就能看到生姜赞美你的文章了😊：",
                avatarText: '张'
            },
            niuzuichun: {
                password: 'NZC54188',
                name: '牛嘴唇',
                role: 'user',
                message: "牛嘴唇，记得帮生姜拉人  ",
                avatarText: '牛'
            }
        };
        
        // 权限配置
        const permissions = {
            superadmin: ['superadmin', 'admin', 'user'],
            admin: ['admin', 'user'],
            user: ['user']
        };
        
        // 安全配置
        const securityConfig = {
            maxAttempts: 5,
            sessionTimeout: 5 * 60 * 1000, // 5分钟
            lockoutTime: 2 * 60 * 1000 // 2分钟锁定
        };
        
        // DOM元素
        const loginSection = document.getElementById('loginSection');
        const messageSection = document.getElementById('messageSection');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const errorMessage = document.getElementById('errorMessage');
        const userName = document.getElementById('userName');
        const userAvatar = document.getElementById('userAvatar');
        const userRole = document.getElementById('userRole');
        const messageContent = document.getElementById('messageContent');
        const attemptsLeft = document.getElementById('attemptsLeft');
        const timeLeft = document.getElementById('timeLeft');
        const sessionTimer = document.getElementById('sessionTimer');
        const accountSelector = document.getElementById('accountSelector');
        const selectAccount = document.getElementById('selectAccount');
        const agreeCheckbox = document.getElementById('agreeCheckbox');
        
        // 安全状态
        let loginAttempts = securityConfig.maxAttempts;
        let sessionTimerInterval;
        let lockoutTimeout;
        let currentUser = null;
        
        // 初始化
        function init() {
            updateAttemptsCounter();
            checkLogin();
            addEventListeners();
        }
        
        // 添加事件监听
        function addEventListeners() {
            loginBtn.addEventListener('click', handleLogin);
            logoutBtn.addEventListener('click', handleLogout);
            selectAccount.addEventListener('change', handleAccountSelect);
            
            // 输入过滤
            usernameInput.addEventListener('input', sanitizeInput);
            passwordInput.addEventListener('input', sanitizeInput);
        }
        
        // 输入清理
        function sanitizeInput(e) {
            // 移除潜在的恶意字符
            e.target.value = e.target.value.replace(/[<>"'`]/g, '');
        }
        
        // 处理登录
        function handleLogin() {
            if (loginAttempts <= 0) {
                showError("账户已锁定，请稍后再试");
                return;
            }
            
            if (!agreeCheckbox.checked) {
                showError("请先同意保密协议");
                return;
            }
            
            const username = usernameInput.value.trim().toLowerCase();
            const password = passwordInput.value;
            
            if (!username || !password) {
                showError("请输入用户名和密码");
                return;
            }
            
            // 查找账户
            let account = null;
            if (accounts[username]) {
                account = accounts[username];
            } else {
                // 检查中文用户名
                for (const key in accounts) {
                    if (accounts[key].name === username) {
                        account = accounts[key];
                        break;
                    }
                }
            }
            
            if (account && account.password === password) {
                // 登录成功
                loginSuccess(account);
            } else {
                // 登录失败
                loginAttempts--;
                updateAttemptsCounter();
                
                if (loginAttempts <= 0) {
                    lockAccount();
                } else {
                    showError(`用户名或密码错误，剩余尝试次数: ${loginAttempts}`);
                }
            }
        }
        
        // 登录成功处理
        function loginSuccess(account) {
            // 重置尝试次数
            loginAttempts = securityConfig.maxAttempts;
            updateAttemptsCounter();
            
            // 存储登录状态
            sessionStorage.setItem('loggedInUser', account.name);
            sessionStorage.setItem('loginTime', Date.now());
            sessionStorage.setItem('userRole', account.role);
            
            currentUser = account;
            showMessageForUser(account.name);
            startSessionTimer();
        }
        
        // 显示用户专属留言
        function showMessageForUser(username) {
            const account = findAccountByName(username);
            if (account) {
                userName.textContent = account.name;
                userAvatar.textContent = account.avatarText;
                
                // 设置角色徽章
                userRole.textContent = getRoleName(account.role);
                userRole.className = 'role-badge ' + account.role + '-badge';
                
                // 安全显示消息
                messageContent.textContent = account.message;
                
                // 随机生成头像背景色
                const colors = ['#1a2a6c', '#b21f1f', '#4caf50', '#ff9800', '#9c27b0'];
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                userAvatar.style.background = `linear-gradient(135deg, ${randomColor} 0%, ${adjustColor(randomColor, 20)} 100%)`;
                
                // 显示账户选择器（管理员以上）
                if (account.role !== 'user') {
                    accountSelector.style.display = 'block';
                    populateAccountSelector(account);
                } else {
                    accountSelector.style.display = 'none';
                }
                
                loginSection.style.display = 'none';
                messageSection.style.display = 'block';
            }
        }
        
        // 填充账户选择器
        function populateAccountSelector(currentAccount) {
            selectAccount.innerHTML = '<option value="">-- 请选择账户 --</option>';
            
            // 获取当前用户有权查看的角色
            const allowedRoles = permissions[currentAccount.role];
            
            // 添加可查看的账户
            for (const key in accounts) {
                const account = accounts[key];
                
                // 排除当前用户自己
                if (account.name === currentAccount.name) continue;
                
                // 检查权限
                if (allowedRoles.includes(account.role)) {
                    const option = document.createElement('option');
                    option.value = account.name;
                    option.textContent = `${account.name} (${getRoleName(account.role)})`;
                    selectAccount.appendChild(option);
                }
            }
        }
        
        // 处理账户选择
        function handleAccountSelect() {
            const selectedAccount = selectAccount.value;
            if (selectedAccount) {
                showMessageForUser(selectedAccount);
            }
        }
        
        // 查找账户
        function findAccountByName(name) {
            for (const key in accounts) {
                if (accounts[key].name === name) {
                    return accounts[key];
                }
            }
            return null;
        }
        
        // 获取角色名称
        function getRoleName(role) {
            switch (role) {
                case 'superadmin': return '超级管理员';
                case 'admin': return '管理员';
                case 'user': return '用户';
                default: return role;
            }
        }
        
        // 处理退出
        function handleLogout() {
            sessionStorage.removeItem('loggedInUser');
            sessionStorage.removeItem('loginTime');
            sessionStorage.removeItem('userRole');
            clearInterval(sessionTimerInterval);
            
            loginSection.style.display = 'block';
            messageSection.style.display = 'none';
            usernameInput.value = '';
            passwordInput.value = '';
            agreeCheckbox.checked = false;
            
            // 重置尝试次数
            loginAttempts = securityConfig.maxAttempts;
            updateAttemptsCounter();
        }
        
        // 检查登录状态
        function checkLogin() {
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            const loginTime = parseInt(sessionStorage.getItem('loginTime'));
            const userRole = sessionStorage.getItem('userRole');
            
            if (loggedInUser) {
                // 检查会话是否过期
                const currentTime = Date.now();
                const elapsedTime = currentTime - loginTime;
                
                if (elapsedTime < securityConfig.sessionTimeout) {
                    currentUser = {
                        name: loggedInUser,
                        role: userRole
                    };
                    showMessageForUser(loggedInUser);
                    startSessionTimer(securityConfig.sessionTimeout - elapsedTime);
                } else {
                    sessionStorage.removeItem('loggedInUser');
                    sessionStorage.removeItem('loginTime');
                    sessionStorage.removeItem('userRole');
                }
            }
        }
        
        // 开始会话计时器
        function startSessionTimer(timeRemaining = securityConfig.sessionTimeout) {
            clearInterval(sessionTimerInterval);
            
            let timeLeftMs = timeRemaining;
            
            sessionTimerInterval = setInterval(() => {
                timeLeftMs -= 1000;
                
                if (timeLeftMs <= 0) {
                    clearInterval(sessionTimerInterval);
                    handleLogout();
                    return;
                }
                
                const minutes = Math.floor(timeLeftMs / 60000);
                const seconds = Math.floor((timeLeftMs % 60000) / 1000);
                
                timeLeft.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // 锁定账户
        function lockAccount() {
            showError(`账户已锁定，请等待 ${securityConfig.lockoutTime/60000} 分钟`);
            loginBtn.disabled = true;
            
            lockoutTimeout = setTimeout(() => {
                loginAttempts = securityConfig.maxAttempts;
                updateAttemptsCounter();
                loginBtn.disabled = false;
                errorMessage.style.display = 'none';
            }, securityConfig.lockoutTime);
        }
        
        // 更新尝试次数显示
        function updateAttemptsCounter() {
            attemptsLeft.textContent = loginAttempts;
            
            if (loginAttempts <= 2) {
                attemptsLeft.parentElement.style.color = '#d32f2f';
                attemptsLeft.parentElement.style.fontWeight = 'bold';
            } else {
                attemptsLeft.parentElement.style.color = '#666';
                attemptsLeft.parentElement.style.fontWeight = 'normal';
            }
        }
        
        // 显示错误信息
        function showError(message) {
            errorMessage.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${message}`;
            errorMessage.style.display = 'block';
            
            // 5秒后隐藏错误信息
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 5000);
        }
        
        // 辅助函数：调整颜色亮度
        function adjustColor(color, percent) {
            const num = parseInt(color.replace("#",""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            
            return "#" + (
                0x1000000 +
                (R < 255 ? (R < 1 ? 0 : R) : 255) * 0x10000 +
                (G < 255 ? (G < 1 ? 0 : G) : 255) * 0x100 +
                (B < 255 ? (B < 1 ? 0 : B) : 255)
            ).toString(16).slice(1);
        }
        
        // 初始化应用
        init();
    </script>
</body>
</html>
